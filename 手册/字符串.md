å­—ç¬¦ä¸²æ˜¯æœ‰é™å­—ç¬¦åºåˆ—ã€‚

å½“ç„¶ï¼ŒçœŸæ­£çš„é—®é¢˜æ˜¯å­—ç¬¦æ˜¯ä»€ä¹ˆã€‚

å¯¹äºè®²è‹±è¯­çš„äººæ¥è¯´ï¼Œå­—ç¬¦å°±æ˜¯aã€bã€cç­‰å­—æ¯ï¼ŒåŒ…æ‹¬æ•°å­—å’Œé€šç”¨æ ‡ç‚¹ç¬¦å·ã€‚è¿™äº›å­—ç¬¦å·²ç»ä¸€èµ·æ ‡å‡†åŒ–åœ°å¯¹åº”[ASCII](https://en.wikipedia.org/wiki/ASCII)çš„0åˆ°127çš„æ•´æ•°å€¼ã€‚

è¯šç„¶ï¼Œåœ¨éè‹±è¯­è¯­è¨€ä¸­ï¼Œæœ‰å¾ˆå¤šåˆ«çš„å­—ç¬¦ï¼ŒåŒ…æ‹¬ASCIIçš„å˜ä½“ï¼ˆå¸¦é‡éŸ³æˆ–åˆ«çš„ä¿®æ”¹ï¼‰ï¼Œç›¸å…³çš„ä¹¦å†™å­—æ¯åŒ…æ‹¬ï¼ˆå¤ï¼‰æ–¯æ‹‰å¤«å­—æ¯å’Œå¸Œè…Šå­—æ¯ï¼›è¿˜æœ‰ä¸ASCIIåŠè‹±è¯­å®Œå…¨æ— å…³çš„ä¹¦å†™å­—æ¯ï¼Œæ‘†é˜”é˜¿æ‹‰ä¼¯æ–‡ã€ä¸­æ–‡ã€å¸Œä¼¯æ¥æ–‡ã€åŒ—å°åº¦æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡æˆ–æœé²œæ–‡ã€‚

ç»Ÿä¸€å­—ç¬¦ç¼–ç æ ‡å‡†ï¼ˆ[Unicode](https://en.wikipedia.org/wiki/Unicode)ï¼‰å¤„ç†ä¸€ä¸ªå­—ç¬¦ç©¶ç«Ÿæ˜¯ä»€ä¹ˆçš„å¤æ‚æ€§ï¼Œå¹¶è¢«æ™®éæ¥å—ä½œä¸ºå†³å®šæ€§æ ‡å‡†è§£å†³è¯¥é—®é¢˜ã€‚

æ ¹æ®ç å†œè‡ªèº«éœ€è¦ï¼Œå¯ä»¥å®Œå…¨ä¸å±Œï¼ˆå¿½ç•¥ï¼‰è¿™äº›çç¢ï¼Œå‡è£…åªå­˜åœ¨ASCIIå­—ç¬¦ï¼Œä¹Ÿå¯ä»¥å†™ä»£ç æå®šï¼ˆå¤„ç†æˆ–ç¼–ç ï¼‰å¯èƒ½ç¢°åˆ°çš„ä»»ä½•éASCIIå­—ç¬¦ã€‚

çŒªåè®©æ”¶æ‹¾ç®€å•ASCIIæ–‡æœ¬ç®€å•ä¸”é«˜æ•ˆï¼Œå¯¹ä»˜Unicodeæ–‡æœ¬åˆ™å°½å¯èƒ½ç®€å•é«˜æ•ˆã€‚
ç‰¹åˆ«æ˜¯ï¼Œç¾¤ä¼—å¯ä»¥å†™Cé£æ ¼å­—ç¬¦ä¸²ä»£ç æ¥å¤„ç†ASCIIå­—ç¬¦ä¸²ï¼Œä¼šå¦‚æœŸè¿è½¬ï¼Œä¸è®ºæ€§èƒ½å’Œè¯­ä¹‰éƒ½ä¿±ä½³ã€‚
è‹¥æ˜¯ç¢°åˆ°éASCIIæ–‡æœ¬ï¼Œä¼šä»¥å¾ˆè¿äººï¼ˆgracefulï¼‰çš„æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯å‘Šå¤±è´¥ï¼Œè€Œä¸æ˜¯é»˜é»˜å •è½æ”¶åœºã€‚
å¦‚æœç¢°åˆ°è¿™ç§æƒ…å†µï¼Œç«¯ç›´ä¿®æ”¹ä»£ç å¤„ç†éASCIIå­—ç¬¦æ•°æ®ã€‚

æœ‰äº›å€¼å¾—æ³¨æ„çš„å’ŒJuliaå­—ç¬¦ä¸²ç›¸å…³çš„é«˜çº§ç‰¹æ€§ï¼š

- Juliaå®šä¹‰äº†`String`ä½œä¸ºå­—ç¬¦ä¸²å†…å»ºå…·ä½“ç±»å‹ã€‚è¿™ä»¥[UTF-8](https://en.wikipedia.org/wiki/UTF-8)å­—ç¬¦ç¼–ç æ”¯æŒæ•´ä¸ªUnicodeå­—ç¬¦ï¼Œè¿˜æœ‰ä¸ª`transcode`å‡½æ•°æ¥åšUnicodeä¸åŒå­—ç¬¦ç¼–ç ä¹‹é—´çš„è½¬æ¢ã€‚
- Juliaä¸­æ‰€æœ‰å­—ç¬¦ä¸²ç±»å‹éƒ½æ˜¯`AbstractString`çš„å­ç±»ï¼Œå¤–éƒ¨åŒ…å®šä¹‰é¢å¤–çš„AbstractStringçš„å­—ç±»ï¼ˆæ¯”å¦‚å¯¹äºåˆ«çš„å­—ç¬¦ç¼–ç ï¼‰ã€‚å¦‚æœç¾¤ä¼—å®šä¹‰ä¸€ä¸ªå‡½æ•°æƒ³å¸¦æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œå¯ä»¥æŠŠè¯¥å‚æ•°å£°æ˜ä¸ºAbstractStringä»¥æ¥å—ä»»æ„å­—ç¬¦ä¸²ç±»å‹ã€‚
- å’ŒC/Javaä¸€æ ·ï¼Œä½†ä¸åŒäºå¤§å¤šæ•°åŠ¨æ€ç¼–ç¨‹è¯­è¨€ï¼ŒJuliaæœ‰ä¸ªä¸€ç­‰ç±»æ¥è¡¨ç¤ºå•ä¸ªå­—ç¬¦ï¼Œå«åš`AbstractChar`ã€‚å†…å»ºçš„`Char`æ˜¯AbstractCharçš„å­—ç±»ï¼Œæ˜¯ä¸ª32ä½çš„åŸå§‹ç±»å‹ï¼Œèƒ½å¤Ÿè¡¨è¾¾ä»»æ„Unicodeå­—ç¬¦ï¼ˆå½“ç„¶æ˜¯åŸºäºUTF-8å­—ç¬¦ç¼–ç çš„ï¼‰ã€‚
- åƒJavaä¸­ä¸€æ ·ï¼Œå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼šAbstractStringå¯¹è±¡çš„å€¼æ˜¯ä¸å¯å˜æ›´çš„ï¼Œæ„å»ºä¸€ä¸ªä¸åŒçš„å­—ç¬¦ä¸²å°±æ˜¯ä»åˆ«çš„å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†æ„å»ºæ–°çš„å­—ç¬¦ä¸²ã€‚
- æ¦‚å¿µä¸Šï¼Œä¸€ä¸ªå­—ç¬¦ä¸²å°±æ˜¯ä»ç´¢å¼•åˆ°å­—ç¬¦çš„åå‡½æ•°ï¼šæŸäº›ç´¢å¼•ï¼Œä¸è¿”å›å­—ç¬¦ï¼Œè€Œæ˜¯æŠ›å‡ºå¼‚å¸¸ã€‚è¿™å…è®¸å­—ç¬¦ä¸²ä¸­é«˜æ•ˆçš„å­—èŠ‚ç´¢å¼•è€Œéå­—ç¬¦ç´¢å¼•ï¼Œåè€…å¯¹å˜å®½Unicodeå­—ç¬¦ç¼–ç çš„å®ç°ä¸èƒ½å…¼é¡¾æ•ˆç‡å’Œå¤æ‚åº¦ã€‚

# å­—ç¬¦

ä¸€ä¸ª`Char`å€¼è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼šåªæ˜¯32ä½åŸå§‹ç±»å‹ï¼Œæœ‰è¿™ç‰¹æ®Šçš„å­—é¢å«ä¹‰å’Œé€‚å½“çš„ç®—æœ¯è¡Œä¸ºï¼Œå¯ä»¥è½¬æ¢æˆæ•°å€¼ç±»å‹ï¼Œè¡¨ç¤ºä¸€ä¸ª[Unicodeç¼–ç ç‚¹](https://en.wikipedia.org/wiki/Code_point)ã€‚
çŒªåå¯èƒ½åœ¨åˆ«çš„åŒ…ä¸­å®šä¹‰AbstractCharçš„å­—ç±»ï¼Œä¾‹å¦‚ä¼˜åŒ–å…¶ä½™[æ–‡æœ¬å­—ç¬¦ç¼–ç ](https://en.wikipedia.org/wiki/Character_encoding)æ“ä½œç­‰ã€‚
ä¸‹é¢ä½“ä¼šCharå¦‚ä½•ç»™å‡ºå’Œæ˜¾ç¤ºçš„ï¼š
```
julia> 'x'
'x': ASCII/Unicode U+0078 (category Ll: Letter, lowercase)

julia> typeof(ans)
Char
```

å¯ä»¥æŠŠCharè½¬æ¢æˆæ•´å‹å€¼ï¼Œä¹Ÿå°±æ˜¯ï¼ˆi.e. id estï¼‰ä¸€ä¸ªUnicodeç¼–ç ç‚¹ï¼š
```
julia> Int('x')
120

julia> typeof(ans)
Int64
```
*è‹¥åœ¨32ä½JuliaREPLä¸Šï¼Œåˆ™`typeof(ans)`æ˜¯Int32ã€‚*

å¯ä»¥æŠŠä¸€ä¸ªæ•´å‹å€¼è½¬æ¢æˆCharï¼š
```
julia> Char(120)
'x': ASCII/Unicode U+0078 (category Ll: Letter, lowercase)
```
**å¹¶éæ‰€æœ‰æ•´å‹å€¼éƒ½æ˜¯æœ‰æ•ˆçš„Unicodeç¼–ç ç‚¹**ï¼Œä½†ä¸ºäº†æ€§èƒ½èµ·è§ï¼ŒCharè½¬æ¢æ²¡æœ‰æ£€æŸ¥æ¯ä¸ªå­—ç¬¦å€¼æœ‰æ•ˆå¦ã€‚
å¦‚æœç å†œæƒ³æ£€æŸ¥æ¯ä¸ªè½¬æ¢çš„å€¼æ˜¯æœ‰æ•ˆçš„Unicodeç¼–ç ç‚¹å¦ï¼Œå¯ä»¥ç”¨`isvalid`å‡½æ•°ï¼š
```
julia> Char(typemax(UInt32))
ERROR: Base.CodePointError{UInt32}(0xffffffff)
Stacktrace:
 [1] code_point_err(::UInt32) at .\char.jl:73
 [2] Char(::UInt32) at .\char.jl:147
 [3] top-level scope at none:0

julia> Char(0x001fffff)
'\U1fffff': Unicode U+1fffff (category In: Invalid, too high)

julia> isvalid(Char, 0x001fffff)
false

julia> Char(0x00200000)
ERROR: Base.CodePointError{UInt32}(0x00200000)
Stacktrace:
 [1] code_point_err(::UInt32) at .\char.jl:73
 [2] Char(::UInt32) at .\char.jl:147
 [3] top-level scope at none:0
```

*è«éUnicodeç¼–ç ç‚¹å–å€¼èŒƒå›´æ˜¯0åˆ°2097151ï¼ˆ0x001fffffï¼‰ï¼Ÿ*

æœ¬æ–‡ç¼–å†™ä¹‹æ—¶ï¼ˆas of this writingï¼‰ï¼ŒUnicodeç¼–ç ç‚¹åŒ…æ‹¬[U+00, U+D7FF]å’Œ[U+E000, U+10FFFF]ä¸¤ä¸ªæœ‰æ•ˆåŒºæ®µã€‚
è¿™ä¸ä»£è¡¨å·²åˆ†é…å…·ä½“å«ä¹‰ã€ä¹Ÿä¸æ‰è¡¨åº”ç”¨å¿…é¡»è§£é‡Šçš„ï¼Œä½†æ‰€æœ‰è¿™äº›å€¼éƒ½è®¤ä¸ºæ˜¯åˆæ³•çš„Unicodeå­—ç¬¦ã€‚

*å¯ä»¥åœ¨[è¿™é‡Œ](http://unicode.org/charts/)æ£€ç´¢Unicodeç¼–ç ç‚¹å¯¹åº”çš„å­—ç¬¦ã€‚*

```
julia> isvalid(Char, 0xd7ff)
true

julia> isvalid(Char, 0xd800)
false

julia> isvalid(Char, 0xdfff)
false

julia> isvalid(Char, 0xe000)
true

julia> isvalid(Char, 0x10ffff)
true

julia> isvalid(Char, 0x110000)
false
```

é€šè¿‡Unicodeç¼–ç ç‚¹çš„æ–¹å¼ç›´æ¥è¡¨è¾¾æŸä¸ªå­—ç¬¦çš„æ–¹å¼ï¼š
- ä»¥`\u`å¼€å¤´ï¼Œåè·Ÿæœ€å¤š4ä¸ªåå…­è¿›åˆ¶æ•°å­—ï¼›
- ä»¥`\U`å¼€å¤´ï¼Œåè·Ÿæœ€å¤š8ä¸ªåå…­ç¦æ­¢æ•°å­—ï¼Œç›®å‰æœ€é•¿åªç”¨åˆ°6ä¸ªã€‚
```
julia> '\u08'
'\b': ASCII/Unicode U+0008 (category Cc: Other, control)

julia> '\u8888'
'è¢ˆ': Unicode U+8888 (category Lo: Letter, other)

julia> '\U00011000'
'ï¿½': Unicode U+011000 (category Mc: Mark, spacing combining)

julia> '\u1314'
'áŒ”': Unicode U+1314 (category Lo: Letter, other)

julia> '\u9527'
'é”§': Unicode U+9527 (category Lo: Letter, other)
```

Juliaæ ¹æ®ç”¨æˆ·ç³»ç»Ÿç°åœºå’Œè¯­è¨€è®¾ç½®å†³å®šæŒ‰ç…§åŸæ ·æ‰“å°å“ªä¸ªå­—ç¬¦ï¼Œå¿…é¡»ä¸€èˆ¬åœ°æ˜¾ç¤º`\u`æˆ–`\U`è½¬ä¹‰è¾“å…¥å½¢å¼ã€‚
é™¤äº†è¿™äº›Unicodeè½¬ä¹‰å½¢å¼ï¼Œå…¨éƒ¨[Cçš„ä¸€èˆ¬è½¬ä¹‰è¾“å…¥å½¢å¼](https://en.wikipedia.org/wiki/C_syntax#Backslash_escapes)ä¹Ÿå¯ä»¥ç”¨ã€‚

```
julia> Int('\0')
0

julia> Int('\t')
9

julia> Int('\r')
13

julia> Int('\n')
10

julia> Int('\x7f')
127

julia> Int('\177')
127
```

å¯ä»¥æ¯”è¾ƒCharã€å¯ä»¥åº”ç”¨æœ‰é™çš„ç®—æœ¯æ“ä½œï¼š
```
julia> 'A' < 'a'
true

julia> '0' < '9'
true

julia> 'Z' + 1
'[': ASCII/Unicode U+005b (category Ps: Punctuation, open)
```

# å­—ç¬¦ä¸²åŸºç¡€

å­—ç¬¦ä¸²ç”±åŒå¼•å·ã€ä¸‰ä¸ªåŒå¼•å·åŒ…è£¹ã€‚
```
julia> huaan = "åå®‰"
"åå®‰"

julia> xiucai = """www.nagexiucai.com"""
"www.nagexiucai.com"

julia> tangyin = """å”å¯…ï¼Œå­—"ä¼¯è™"ã€åæ”¹å­—"å­ç•"ï¼Œå·"å…­å¦‚å±…å£«"ã€"æ¡ƒ èŠ±åºµä¸»"ã€"é²å›½å”ç”Ÿ"ã€"é€ƒç¦…ä»™å"ã€‚"""
"å”å¯…ï¼Œå­—\"ä¼¯è™\"ã€åæ”¹å­—\"å­ç•\"ï¼Œå·\"å…­å¦‚å±…å£«\"ã€\"æ¡ƒèŠ±åºµä¸»\"ã€\" é²å›½å”ç”Ÿ\"ã€\"é€ƒç¦…ä»™å\"ã€‚"
```

è‹¥æƒ³ä»å­—ç¬¦ä¸²ä¸­æŠ½å‡ºæŸä¸ªå­—ç¬¦ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•è®¿é—®ã€‚
```
# æ¥ç€ä¸Šè¿°ç¤ºä¾‹ä»£ç åš
julia> huaan[1]
'å': Unicode U+534e (category Lo: Letter, other)

julia> huaan[0]
ERROR: BoundsError: attempt to access "åå®‰"
  at index [0]
Stacktrace:
 [1] checkbounds at .\strings\basic.jl:193 [inlined]
 [2] codeunit at .\strings\string.jl:87 [inlined]
 [3] getindex(::String, ::Int64) at .\strings\string.jl:206
 [4] top-level scope at none:0

julia> huaan[end]
'å®‰': Unicode U+5b89 (category Lo: Letter, other)
```

*ä¸æƒ³Juliaçš„ç´¢å¼•å±…ç„¶è·Ÿ[Lua](http://www.lua.org/)ä¸€æ ·åœ°ä»ä¸€å¼€å§‹ã€‚*

å¾ˆå¤šJuliaçš„å¯¹è±¡ï¼ŒåŒ…æ‹¬å­—ç¬¦ä¸²ï¼Œéƒ½å¯ä»¥é€šè¿‡æ•´æ•°ç´¢å¼•ã€‚
ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•é€šè¿‡`firstindex(string)`è¿”å›ï¼Œæœ€åä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•é€šè¿‡`lastindex(string)`è¿”å›ã€‚
å…³é”®å­—`end`å¯ä½œä¸ºç»™å®šç»´åº¦æœ€åä¸€ä¸ªç´¢å¼•çš„é€Ÿè®°ï¼ˆåˆ«åï¼‰ã€‚
Juliaä¸­å¤§å¤šæ•°ç´¢å¼•éƒ½æ˜¯ä»¥ä¸€ä¸ºå•ä½ï¼Œå¤§å¤šæ•´æ•°ç´¢å¼•ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•å¤šæ˜¯ä¸€ï¼›**ä½†å¹¶éå¿…ç„¶æ„å‘³ç€æœ€åä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ç­‰äºå­—ç¬¦ä¸²é•¿åº¦nçš„ï¼ˆè§UTF-8å­—ç¬¦ä¸²ï¼‰**ã€‚

è¿˜å¯ä»¥å¯¹`end`åšä»»ä½•æ­£å¸¸è¿ç®—ï¼ˆç»“æœå¿…é¡»æ˜¯æ­£æ•´æ•°ï¼‰ã€‚
```
julia> xiucai[length(xiucai)]
'm': ASCII/Unicode U+006d (category Ll: Letter, lowercase)

julia> xiucai[endÃ·2]
'x': ASCII/Unicode U+0078 (category Ll: Letter, lowercase)
```

ä»»ä½•å°äºä¸€æˆ–å¤§äºendçš„ç´¢å¼•å‡å¼•èµ·æŠ¥é”™ï¼š
```
julia> xiucai[0]
ERROR: BoundsError: attempt to access "www.nagexiucai.com"
  at index [0]
Stacktrace:
 [1] checkbounds at .\strings\basic.jl:193 [inlined]
 [2] codeunit at .\strings\string.jl:87 [inlined]
 [3] getindex(::String, ::Int64) at .\strings\string.jl:206
 [4] top-level scope at none:0

julia> xiucai[end+1]
ERROR: BoundsError: attempt to access "www.nagexiucai.com"
  at index [19]
Stacktrace:
 [1] checkbounds at .\strings\basic.jl:193 [inlined]
 [2] codeunit at .\strings\string.jl:87 [inlined]
 [3] getindex(::String, ::Int64) at .\strings\string.jl:206
 [4] top-level scope at none:0
```

è¿˜å¯ä»¥é€šè¿‡ç´¢å¼•èŒƒå›´ä»å­—ç¬¦ä¸²ä¸­æŠ½å‡ºå­å­—ç¬¦ä¸²ã€‚
```
# å‰é—­åé—­
julia> xiucai[5:14]
"nagexiucai
```

è¦æ³¨æ„ï¼š`string[i]`å’Œ`string[i, j]`è¿”å›ä¸åŒç»“æœï¼
```
julia> xiucai[4]
'.': ASCII/Unicode U+002e (category Po: Punctuation, other)

julia> xiucai[4:4]
"."
```
ä¸Šè¿°ä¾‹ç¨‹ä¸­ï¼Œå‰è€…è¿”å›Charï¼Œåè€…è¿”å›Stringï¼ˆå³ä½¿åªæœ‰ä¸€ä¸ªå­—ç¬¦å…ƒç´ ï¼‰ã€‚

ä¸æ”¯æŒâ€œåå‘ç´¢å¼•â€ï¼Œä½†åªè¦`j`å°äº`i`å°±è¿”å›ç©ºä¸²ã€‚
```
julia> xiucai[4:-4]
""

julia> xiucai[-4:4]
ERROR: BoundsError: attempt to access "www.nagexiucai.com"
  at index [-4:4]
Stacktrace:
 [1] checkbounds at .\strings\basic.jl:193 [inlined]
 [2] getindex(::String, ::UnitRange{Int64}) at .\strings\string.jl:244
 [3] top-level scope at none:0

julia> xiucai[-4:-4]
ERROR: BoundsError: attempt to access "www.nagexiucai.com"
  at index [-4:-4]
Stacktrace:
 [1] checkbounds at .\strings\basic.jl:193 [inlined]
 [2] getindex(::String, ::UnitRange{Int64}) at .\strings\string.jl:244
 [3] top-level scope at none:0
```

ä¸æ”¯æŒâ€œåŠç¼ºçœç´¢å¼•â€ï¼Œæ”¯æŒâ€œå…¨ç¼ºçœç´¢å¼•â€ï¼š
```
julia> xiucai[:]
"www.nagexiucai.com"

julia> xiucai[1:end]
"www.nagexiucai.com"

julia> xiucai[:end]
ERROR: MethodError: no method matching getindex(::String, ::Symbol)
Closest candidates are:
  getindex(::String, ::UnitRange{Int64}) at strings/string.jl:241
  getindex(::String, ::Int64) at strings/string.jl:206
  getindex(::String, ::UnitRange{#s57} where #s57<:Integer) at strings/string.jl:238
  ...
Stacktrace:
 [1] top-level scope at none:0

julia> xiucai[1:]
ERROR: syntax: missing last argument in "1:" range expression
```

ç´¢å¼•èŒƒå›´æ‹·è´æºå­—ç¬¦ä¸²çš„ä¸€æ®µæˆ–å…¨éƒ¨ã€‚
å¦å¤–ï¼Œå¯ä»¥è¿ç”¨`SubString`åˆ›å»ºå­—ç¬¦ä¸²çš„ä¸€ä¸ªè§†å›¾ï¼ˆ*å¼•ç”¨ï¼Ÿ*ï¼‰ï¼Œä¾‹å¦‚ï¼š
```
julia> me = SubString(xiucai, 5, 14)
"nagexiucai"

julia> typeof(me)
SubString{String}
```

è‹¥å¹²æ ‡å‡†å‡½æ•°ï¼Œå¦‚chopã€chompã€stripç­‰å‡è¿”å›SubStringã€‚

# Unicodeï¼ˆç»Ÿä¸€å­—ç¬¦ç¼–ç ï¼‰å’ŒUTF-8ï¼ˆåŸºäºå­—èŠ‚çš„ç»Ÿä¸€å­—ç¬¦ç¼–ç ä¼ è¾“æ ¼å¼ï¼‰

Juliaå…¨é¢æ”¯æŒUnicodeå­—ç¬¦å’Œå­—ç¬¦ä¸²ã€‚
ä¸Šè¾¹å·²ç»è®¨è®ºè¿‡ï¼ŒUnicodeç¼–ç ç‚¹å¯é€šè¿‡`\uXXXX`å’Œ`\UXXXXXXXX`è½¬ä¹‰åºåˆ—è¡¨ç¤ºï¼Œä¹Ÿå¯ç”¨Cé£æ ¼è½¬ä¹‰åºåˆ—è¡¨ç¤ºã€‚
åŒæ ·å¯ç”¨äºä¹¦å†™å­—ç¬¦ä¸²å­—é¢ã€‚
```
julia> s = "\u9527 \u1314"
"é”§ áŒ”"
```

è¿™äº›Unicodeå­—ç¬¦æ˜¾ç¤ºä¸ºè½¬ä¹‰åºåˆ—è¿˜æ˜¯ç‰¹æ®Šå­—ç¬¦ï¼Œå–å†³äºç”¨æˆ·çš„ç»ˆç«¯ç°åœºè®¾ç½®åŠå…¶æ‰€æ”¯æŒçš„Unicodeç¼–ç ç‚¹ã€‚
å­—ç¬¦ä¸²å­—é¢é€šè¿‡UTF-8å­—ç¬¦ç¼–ç ã€‚
UTF-8æ˜¯å˜å®½å­—ç¬¦ç¼–ç ï¼Œæ„å‘³ç€å¹¶éå…¨éƒ¨å­—ç¬¦ä»¥ç›¸åŒå­—èŠ‚æ•°ç¼–ç ã€‚
åœ¨UTF-8ä¸­ï¼ŒASCIIå­—ç¬¦ï¼ˆé‚£äº›ç¼–ç ç‚¹åœ¨128ä»¥ä¸‹çš„ï¼‰ä¿æŒASCIIç¼–ç ï¼Œå ä¸€ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯ç¼–ç ç‚¹å¤§äºç­‰äº128çš„ç”¨å¤šä¸ªå­—èŠ‚ï¼Œæœ€å¤šè¾¾ä¸€ä¸ªå­—ç¬¦å å››ä¸ªå­—èŠ‚ã€‚
è¿™åˆæ„å‘³ç€ï¼ŒUTF-8å­—ç¬¦ä¸²ä¸­ï¼Œä¸æ˜¯æ‰€æœ‰å­—èŠ‚ç´¢å¼•éƒ½å¿…ç„¶å¯¹åº”å­—ç¬¦ç´¢å¼•ï¼›å¦‚æœå­—èŠ‚ç´¢å¼•æ°å¥½ä¸æ˜¯æœ‰æ•ˆçš„å­—ç¬¦ï¼Œä¼šæŠ¥é”™ã€‚

![](../æ’å›¾/Manual-Strings-UTF8-ByteIndex-CharacterIndex.png "UTF8 ByteIndex CharacterIndex")

æœ¬ä¾‹ç¨‹ä¸­ï¼Œå­—ç¬¦â€œé”§â€æ˜¯ä¸€ä¸ª3å­—èŠ‚çš„Unicodeå­—ç¬¦ï¼Œå› æ­¤å­—èŠ‚ç´¢å¼•2å’Œå­—èŠ‚ç´¢å¼•3æ˜¯æ— æ•ˆçš„ï¼Œä¸‹ä¸€ä¸ªå­—ç¬¦çš„ç´¢å¼•æ˜¯å­—èŠ‚ç´¢å¼•4ï¼›
ä¸‹ä¸€ä¸ªå­—ç¬¦ç´¢å¼•å¯é€šè¿‡`nextind(string, 1)`è®¡ç®—å¾—åˆ°ï¼Œä¸‹ä¸‹ä¸€ä¸ªå­—ç¬¦ç´¢å¼•é€šè¿‡`nextind(string, 4)`è®¡ç®—å¾—åˆ°ï¼Œä¾æ­¤ç±»æ¨ã€‚

![](../æ’å›¾/Manual-Strings-UTF8-Nextind-CharacterIndex.png "UTF8 next character index")

ç´¢å¼•èŒƒå›´é‡‡ç§éå­—ç¬¦ç´¢å¼•ä¹Ÿä¼šæŠ¥é”™ã€‚

![](../æ’å›¾/Manual-Strings-UTF8-IndexRange-Hole.png "UTF8 IndexRange Hole")

ç”±äºå¯å˜é•¿å­—ç¬¦ç¼–ç ä¸­å­—ç¬¦æ•°ï¼ˆ`length(string)`ä¸æ€»æ˜¯å’Œæœ€åçš„å­—èŠ‚ç´¢å¼•ç›¸ç­‰ã€‚
```
# æ¥ä¸Šè¿°ç¤ºä¾‹åš
julia> lastindex(s)
5

julia> s[5:lastindex(s)]
"áŒ”"
```
å¦‚æœä»ä¸€åˆ°`lastindex(s)`è¿­ä»£å­—ç¬¦ä¸²å­—èŠ‚ç´¢å¼•ï¼Œè¿”å›æ²¡æœ‰æŠ¥é”™çš„å­—ç¬¦åºåˆ—ã€‚
è¿™æ ·å¯ä»¥æ¨å‡ºç‰¹å¾`length(s) <= lastindex(s)`ï¼Œå› ä¸ºå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦å¿…é¡»æœ‰è‡ªå·±çš„å­—ç¬¦ç´¢å¼•ã€‚
ä¸‹é¢å°±æ˜¯æŠµé”€ä¸”å•°å—¦çš„éå†UTF-8å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—ç¬¦çš„æ–¹æ³•ï¼š
```
julia> for i = firstindex(s):lastindex(s)
         try
           println(s[i])
         catch
           # å¿½ç•¥
         end
       end
é”§

áŒ”
```

**â€œå¿½ç•¥â€çš„ç©ºç™½è¡Œå®é™…ä¸Šæœ‰ç©ºæ ¼**ï¼Œå¹¸è¿çš„æ˜¯ï¼Œä¸Šè¿°ç¬¨æ‹™çš„é£æ ¼ï¼ˆidiomï¼‰ä¸æ˜¯å¿…è¦çš„ï¼Œéå†å­—ç¬¦ä¸²ï¼Œç›´æ¥å½“ä½œå¯è¿­ä»£å¯¹è±¡å³å¯ï¼Œæ— é¡»å¼‚å¸¸å¤„ç†ã€‚
```
julia> for c in s
         println(c)
       end
é”§

áŒ”
```

Juliaçš„å­—ç¬¦ä¸²å¯åŒ…å«æ— æ•ˆçš„UTF-8ç¼–ç å•å…ƒåºåˆ—ã€‚
è¿™ç»™ä»»ä½•å­—èŠ‚åºåˆ—å½“ä½œ`String`æ¥å¤„ç†è¡Œäº†æ–¹ä¾¿ã€‚
è¿™ç§æƒ…å†µæœ‰æ¡è§„åˆ™ï¼šå½“ä»å·¦åˆ°å³è§£æä¸€ä¸ªUTF-8ç¼–ç å•å…ƒåºåˆ—æ—¶ï¼Œå­—ç¬¦ç”±åŒ¹é…å¤´æ¯”ç‰¹æ¨¡å¼çš„æœ€é•¿å­—èŠ‚ç¼–ç å•å…ƒåºåˆ—ç»„æˆã€‚

- 0xxxxxxx
- 110xxxxx  10xxxxxx
- 1110xxxx  10xxxxxx    10xxxxxx
- 11110xxx  10xxxxxx    10xxxxxx    10xxxxxx
- 10xxxxxx
- 11111xxx

å…¶ä¸­`x`å¯å–é›¶æˆ–ä¸€ï¼ˆåºåˆ—æ¨¡å¼éƒ½æ˜¯äºŒè¿›åˆ¶ï¼‰ã€‚

ç‰¹åˆ«æ˜¯è¿™æ„å‘³ç€èƒ½æ¥å—è¿‡é•¿çš„å’Œå¤ªé«˜çš„ç¼–ç å•å…ƒåºåˆ—ã€‚
æœ€å¥½ç”¨ä¸‹é¢çš„æ —å­è¯´æ˜ï¼š
```
julia> s = "\xc0\xa0\xe2\x88\xe2?"
"\xc0\xa0\xe2\x88\xe2?"

julia> bitstring(0xc0)
"11000000"

julia> bitstring(0xa0)
"10100000"

julia> bitstring(0xe2)
"11100010"

julia> bitstring(0x88)
"10001000"

julia> bitstring(0xe2)
"11100010"

julia> sb = "110000001010000011100010100010001110001000111111"
"110000001010000011100010100010001110001000111111"

julia> foreach(display, s)
'\xc0\xa0': [overlong] ASCII/Unicode U+0020 (category Zs: Separator, space)
'\xe2\x88': Malformed UTF-8 (category Ma: Malformed, bad data)
'\xe2': Malformed UTF-8 (category Ma: Malformed, bad data)
'?': ASCII/Unicode U+003f (category Po: Punctuation, other)

julia> isvalid.(collect(s))
4-element BitArray{1}:
 false
 false
 false
  true

julia> ss = "\xf7\xbf\xbf\xbf"
"\U1fffff"

julia> foreach(display, ss)
'\U1fffff': Unicode U+1fffff (category In: Invalid, too high)
```

å¯è§å‰ä¸¤ä¸ªç¼–ç å•å…ƒ`"\xc0\xa0"`ï¼Œå³äºŒè¿›åˆ¶åºåˆ—â€œ1100000010100000â€ï¼Œå½¢æˆä¸€ä¸ªè¶…é•¿çš„ç©ºé—´å­—ç¬¦ç¼–ç ã€‚
è¿™è‡ªç„¶æ˜¯æ— æ•ˆçš„ï¼Œä½†èƒ½â€œå‡è£…â€è¢«æ¥å—ä¸ºâ€œå•ä¸€å­—ç¬¦â€ã€‚

æ¥ä¸‹æ¥ä¸¤ä¸ªç¼–ç å•å…ƒå½¢æˆä¸‰å­—èŠ‚UTF-8å­—ç¬¦å¤´åºåˆ—ï¼›ç„¶è€Œç¬¬äº”ä¸ªç¼–ç å•å…ƒ`xe2`ä¸æ˜¯æœ‰æ•ˆçš„åç»­ã€‚
å› æ­¤ç¬¬ä¸‰ä¸ªç¼–ç å•å…ƒå’Œç¬¬å››ä¸ªç¼–ç å•å…ƒæ„æˆç•¸å½¢å­—ç¬¦ã€‚

ç›¸ä¼¼åœ°ï¼Œç¬¬äº”ä¸ªç¼–ç å•å…ƒå½¢æˆå¦ä¸€ä¸ªç•¸å½¢å­—ç¬¦ï¼Œå› ä¸ºâ€œ?â€åˆä¸æ˜¯ç¬¬äº”ä¸ªç¼–ç å•å…ƒçš„æœ‰æ•ˆåç»­ã€‚

æœ€å`ss`åŒ…å«ä¸€ä¸ªè¶…é«˜ç¼–ç ç‚¹ã€‚

çŒªåé»˜è®¤é‡‡ç”¨UTF-8å­—ç¬¦ç¼–ç ï¼Œæ”¯æŒæ‰©å±•åŒ…æ·»åŠ åˆ«çš„å­—ç¬¦ç¼–ç ã€‚
ä¸¾ä¸ªæ —å­ï¼Œ[LegacyStrings.jl](https://github.com/JuliaArchive/LegacyStrings.jl)åŒ…ä¸­å®ç°çš„UTF16Stringå’ŒUTF32Stringç±»å‹ã€‚
æ­¤å¤–ï¼Œè®¨è®ºå¦‚ä½•åœ¨å¤–éƒ¨åŒ…ä¸­å®ç°å­—ç¬¦ç¼–ç å·²ç»è¶…å‡ºæœ¬æ–‡çš„èŒƒå›´ã€‚
å…³äºUTF-8å­—ç¬¦ç¼–ç é—®é¢˜æ›´æ·±å…¥çš„è®¨è®ºï¼Œå‚è€ƒã€å­—èŠ‚æ•°ç»„å­—é¢ã€‘ã€‚
é‚£ä¸ª`transcode`å‡½æ•°æä¾›å°†æ•°æ®åœ¨å¤šç§UTF-?å­—ç¬¦ç¼–ç ä¹‹é—´çš„è½¬æ¢ï¼Œä¸»è¦ä¸ºäº†å¤–éƒ¨æ•°æ®å’Œåº“çš„æ­£å¸¸å·¥ä½œã€‚

# è¿ç»“

å­—ç¬¦ä¸²æœ€æœ‰ç”¨çš„æ“ä½œä¹‹ä¸€å°±æ˜¯è¿ç»“ã€‚
```
julia> huaan = "åå®‰"
"åå®‰"

julia> xiucai = "ç§€æ‰"
"ç§€æ‰"

julia> string(huaan, "å’Œ", xiucai, "æ˜¯æœ‹å‹ï¼")
"åå®‰å’Œç§€æ‰æ˜¯æœ‹å‹ï¼"
```

å°å¿ƒè¿ç»“æ— æ•ˆçš„UTF-8å­—ç¬¦ä¸²çš„æ½œåœ¨å±é™©æ˜¯é‡è¦çš„ã€‚
ç»“æœå¯èƒ½åŒ…å«ä¸åŒäºè¾“å…¥å­—ç¬¦ä¸²çš„å­—ç¬¦ï¼Œå­—ç¬¦æ•°ä¹Ÿå¯èƒ½å°‘äºè¢«è¿ç»“å­ä¸²å„è‡ªå­—ç¬¦æ•°ä¹‹å’Œã€‚
```
julia> a, b = "\xe2\x88", "\x80"
("\xe2\x88", "\x80")

julia> c = a*b
"âˆ€"

julia> string(a,b)
"âˆ€"

julia> collect.([a,b,c])
3-element Array{Array{Char,1},1}:
 ['\xe2\x88']
 ['\x80']
 ['âˆ€']

julia> length.([a,b,c])
3-element Array{Int64,1}:
 1
 1
 1
```

è¿™ç§æƒ…å†µåªå‘ç”Ÿåœ¨æ— æ•ˆçš„UTF-8å­—ç¬¦ä¸²ã€‚
å¯¹äºæœ‰æ•ˆçš„UTF-8å­—ç¬¦ä¸²è¿ç»“ï¼Œä¿æŠ¤å­—ç¬¦ä¸²ä¸­å…¨éƒ¨å­—ç¬¦å¹¶å¢å­—ç¬¦ä¸²é•¿åº¦ã€‚

ä¹Ÿå¯ä»¥ç”¨`*`æ›¿ä»£`string`æ¥åšå­—ç¬¦ä¸²è¿ç»“ã€‚
```
julia> "å”å¯…" * "ï¼Œ" * "å­—ä¼¯è™â€¦â€¦"
"å”å¯…ï¼Œå­—ä¼¯è™â€¦â€¦"
```

è™½ç„¶`*`åšå­—ç¬¦ä¸²è¿ç»“è®©ç†Ÿæ‚‰åˆ«çš„ç¼–ç¨‹è¯­è¨€ç”¨`+`åšå­—ç¬¦ä¸²è¿ç»“çš„æœ‹å‹åƒäº†ä¸€æƒŠï¼Œè¿™ä¸ªæ˜Ÿå·åœ¨ä¹‹å‰çš„ç®—æœ¯ï¼ˆä¹˜ï¼‰â€”â€”ç‰¹åˆ«æ˜¯æŠ½è±¡ä»£æ•°ä¸­å‡ºç°è¿‡ã€‚

åœ¨æ•°å­¦ä¸­ï¼ŒåŠ å·ï¼ˆ+ï¼‰é€šå¸¸è¡¨ç¤ºå¯äº¤æ¢æ“ä½œï¼Œè¢«æ“ä½œæ•°çš„é¡ºåºæ— æ‰€è°“ã€‚
ä¸¾ä¸ªä¾‹å­ï¼Œå°±æ˜¯çŸ©é˜µç›¸åŠ ï¼ˆA + B == B + Aï¼ŒAå’ŒBæ˜¯ä»»æ„ç›¸åŒå½¢çŠ¶çš„çŸ©é˜µï¼‰ã€‚
ç›¸ååœ°ï¼Œä¹˜å·ï¼ˆ*ï¼‰è¡¨ç¤ºä¸å¯äº¤æ¢åœ°æ“ä½œï¼Œè¢«æ“ä½œæ•°åœ°é¡ºåºè‡³å…³é‡è¦ã€‚
ä¸¾ä¸ªä¾‹å­ï¼Œå°±æ˜¯çŸ©é˜µç›¸ä¹˜ï¼ˆA * B != B * Aï¼Œé€šå¸¸ï¼‰ã€‚

æ­£å¦‚çŸ©é˜µç›¸ä¹˜ä¸€æ ·ï¼Œå­—ç¬¦ä¸²è¿ç»“æ˜¯ä¸å¯äº¤æ¢çš„ï¼š"huaan" * "xiucai" != "xiucai" * "huaan"ã€‚
å°±å…¶æœ¬èº«è€Œè®ºï¼ˆas suchï¼‰ï¼Œæ˜Ÿå·ï¼ˆ*ï¼‰æ˜¯ä¸­ç¼€å­—ç¬¦ä¸²è¿ç»“æ›´è‡ªç„¶çš„ä»£ç ï¼Œå’Œæ•°å­¦ä¸­çš„åº”ç”¨ä¿æŒä¸€è‡´ã€‚

æ›´å‡†ç¡®åœ°è¯´ï¼Œæ‰€æœ‰æœ‰é™é•¿å­—ç¬¦ä¸²é›†åˆ`S`å’Œè¿ç»“ç¬¦å·ï¼ˆ*ï¼‰ä¸€èµ·ç»„æˆã€[è‡ªç”±ä¹ˆåŠç¾¤](https://zh.wikipedia.org/wiki/è‡ªç”±ä¹ˆåŠç¾¤)ã€‘ï¼Œå…¶ã€[ä¹ˆå…ƒ](https://zh.wikipedia.org/wiki/å–®ä½å…ƒ)ã€‘å°±æ˜¯ç©ºä¸²ã€‚

æ— è®ºä½•æ—¶ï¼Œä¸€ä¸ªâ€œè‡ªç”±ä¹ˆåŠç¾¤â€éƒ½æ˜¯ä¸å¯äº¤æ¢çš„ï¼Œæ“ä½œä¸€èˆ¬è¡¨ç°ä¸º`â‹…`ï¼ˆ*[PR](https://github.com/JuliaLang/julia/pull/28868 "Make center dot more visual")*ï¼‰ã€`*`æˆ–ç›¸ä¼¼ç¬¦å·ï¼Œè€Œä¸æ˜¯`+`ï¼ŒåŠ å·ä¸€èˆ¬è¡¨æ˜æ˜¯å¯äº¤æ¢çš„ã€‚

# å¡«å†™

ç„¶è€Œï¼Œé‡‡ç”¨è¿ç»“æ„å»ºå­—ç¬¦ä¸²ç•¥æ˜¾ç¬¨é‡ã€‚
å‡å°‘`string`å†—ä½™è°ƒç”¨æˆ–é‡å¤`*`çš„å¿…è¦ï¼ŒJuliaå…è®¸é‡‡ç”¨`$`å¡«å†™å­—ç¬¦ä¸²å­—é¢ï¼Œå°±åƒ[Perl](http://www.perl.org/)ä¸­é‚£æ ·ã€‚
```
julia> "$xiucai, $huaan"
"ç§€æ‰, åå®‰"

julia> "$xiucaiï¼Œ $huaan"
ERROR: syntax: interpolated variable $xiucai ends with invalid character "ï¼Œ"; use "$(xiucai)" instead.

julia> "$(xiucai)ï¼Œ $(huaan)"
"ç§€æ‰ï¼Œ åå®‰"
```

è¿™æ˜¾å¾—æ›´å¯è¯»ã€æ›´æ–¹ä¾¿ä¸”ç­‰ä»·äºä¹‹å‰çš„å­—ç¬¦ä¸²è¿ç»“ï¼Œç³»ç»Ÿå°†ä¸Šè¿°å•è¡Œå­—ç¬¦ä¸²å­—é¢ç”¨å­—ç¬¦ä¸²å˜é‡è¿ç»“é‡å†™ã€‚

æœ€çŸ­çš„å®Œæ•´è¡¨è¾¾å¼æ˜¯åœ¨`$`å°†è¯¥è¡¨è¾¾å¼çš„å€¼æ’å…¥å­—ç¬¦ä¸²ã€‚å€ŸåŠ©åœ†æ‹¬å·ï¼Œå¯ä»¥å°†ä»»ä½•è¡¨è¾¾å¼å†™æˆå­—ç¬¦ä¸²ã€‚
```
julia> "9527 + 1314 = $(9527 + 1314)"
"9527 + 1314 = 10841"
```

è¿ç»“å’Œå¡«å†™å‡è°ƒç”¨`string`å‡½æ•°å°†å¯¹è±¡è½¬æ¢æˆå­—ç¬¦ä¸²å½¢å¼ã€‚
å¤§å¤šéAbstractStringå¯¹è±¡ä¸å…¶è¢«ä»¥å­—é¢è¡¨è¾¾å¼è¾“å…¥ç›¸ä¸€è‡´çš„ç´§å‡‘ï¼ˆä¸¥å¯†ï¼‰å­—ç¬¦ä¸²ã€‚
```
julia> v = [0,1,2,3,4]
5-element Array{Int64,1}:
 0
 1
 2
 3
 4

julia> h = [0 1 2 3 4]
1Ã—5 Array{Int64,2}:
 0  1  2  3  4
```

å‡½æ•°`string`æ˜¯`AbstractString`å’Œ`AbstractChar`å€¼çš„èº«ä»½ï¼ˆidentityï¼‰ï¼Œå¯¹è±¡æœ¬è‰²å¡«å†™åˆ°å­—ç¬¦ä¸²ï¼Œæ— å¼•å·ã€æ— è½¬ä¹‰ã€‚
```
julia> JulialangDotOrgDotCN = "julialang.org.cn"
"julialang.org.cn"

julia> "æœ±åç¤¾åŒºï¼š$(JulialangDotOrgDotCN)"
"æœ±åç¤¾åŒºï¼šjulialang.org.cn"
```

è¦å¡«å…¥ç¾å…ƒç¬¦å·å­—é¢æœ¬èº«ï¼ˆ$ï¼‰ï¼Œå¯ä»¥é€šè¿‡åæ–œæ ï¼ˆ\ï¼‰è½¬ä¹‰ã€‚
```
julia> print("é¢å‘äººæ°‘å¸ï¼ˆï¿¥ï¼‰ç¼–ç¨‹è¿˜æ˜¯é¢å‘ç¾å…ƒï¼ˆ\$ï¼‰ç¼–ç¨‹ï¼Ÿ")
é¢å‘äººæ°‘å¸ï¼ˆï¿¥ï¼‰ç¼–ç¨‹è¿˜æ˜¯é¢å‘ç¾å…ƒï¼ˆ$ï¼‰ç¼–ç¨‹ï¼Ÿ
```

# ä¸‰ä¸ªåŒå¼•å·

ç”¨ä¸‰ä¸ªåŒå¼•å·ï¼ˆ"""any text"""ï¼‰åŒ…æ‹¬èµ·æ¥çš„å­—ç¬¦ä¸²æœ‰ç‰¹æ®Šçš„ååº”ï¼Œä¹¦å†™é•¿ç¯‡æ–‡æœ¬å—å¾ˆæœ‰ç”¨ã€‚

é¦–å…ˆï¼Œä¸‰ä¸ªåŒå¼•å·çš„å­—ç¬¦ä¸²ä¼šä¿ç•™ç¼©è¿›ï¼Œå­—ç¬¦ä¸²å†…å®šä¹‰ä»£ç æŒºæœ‰ç”¨ã€‚
```
julia> message = """
       Subject: XXX;
       Content:
         Abstract: ???;
         Illustration: !!!"""
"Subject: XXX;\nContent:\n  Abstract: ???;\n  Illustration: !!!"

julia> print(message)
Subject: XXX;
Content:
  Abstract: ???;
  Illustration: !!!
```

ç¼©è¿›çº§åˆ«ç”±ä¸‰ä¸ªåŒå¼•å·å³åŠè¾¹ä¹‹å‰çš„ç©ºè¡Œè®¾ç½®ï¼š

![](../æ’å›¾/Manual-Strings-TripleQuoted-IndentLevel.png "TripleQuoted IndentLevel")

**ç¼©è¿›çº§åˆ«æ˜¯æ‰€æœ‰è¡Œéƒ½å åŠ çš„å¼€å¤´åºåˆ—ï¼ˆç©ºæ ¼æˆ–æ°´å¹³åˆ¶è¡¨ç¬¦ï¼‰ï¼Œä¸åŒ…æ‹¬ç´§è·Ÿä¸‰ä¸ªåŒå¼•å·å·¦åŠè¾¹çš„è¡Œã€åªåŒ…å«ç©ºæ ¼æˆ–æ°´å¹³åˆ¶è¡¨ç¬¦çš„è¡Œï¼Œæ€»æ˜¯åŒ…å«ç´§è·Ÿä¸‰ä¸ªåŒå¼•å·å³åŠè¾¹çš„è¡Œã€‚**

*TODO: ä¸å‡†ã€‚*

å…¶æ¬¡ï¼Œå¦‚æœä¸‰ä¸ªåŒå¼•å·å¼€å¤´ç´§è·Ÿæ¢è¡Œï¼Œæ–°è¡Œåˆ™è¢«é™¤å»ã€‚
```
julia> hi = """
       i am bob."""
"i am bob."

julia> hi = """i am bob."""
"i am bob."
```
ä½†æ˜¯ç¬¬äºŒè¡Œè‹¥ä¸ºç©ºåˆ™ä¿ç•™ï¼š
```
# æ³¨æ„äº¤äº’å¼å›æ˜¾å¼€å¤´å¤šäº†æ¢è¡Œ
julia> hi = """

       i am bob."""
"\ni am bob."
```

å»ç¼©è¿›ï¼ˆdedentation?ï¼‰åï¼Œå‰¥å»æ¢è¡Œï¼š
```
julia> """
         yes,
         i am."""
"yes,\ni am."
```

æœ€åï¼Œä¸‰ä¸ªåŒæ‹¬å·çš„å­—ç¬¦ä¸²ï¼Œæ— è®ºå•å¼•å·ã€åŒå¼•å·ï¼Œåœ¨å­—ç¬¦åºŠç»“æœä¸­äº§ç”Ÿä¸€ä¸ªæ¢è¡Œç¬¦ï¼ˆ\nï¼‰ï¼Œå³ä½¿ç”¨æˆ·çš„ç¼–è¾‘å™¨é‡‡ç”¨CRLFç»„åˆã€‚
åœ¨å­—ç¬¦ä¸²ä¸­åŒ…å«å›è½¦æ¢è¡Œæœ¬èº«ï¼Œåˆ™éœ€è¦Cé£æ ¼è½¬ä¹‰ã€‚
```
julia> """hi,\r\ni am bob."""
"hi,\r\ni am bob."
```

# é€šç”¨æ“ä½œ

Juliaé»˜è®¤æŒ‰ç…§å­—å…¸æ–¹å¼æ¯”è¾ƒå­—ç¬¦ä¸²ã€‚
```
# å› ä¸ºç¬¬ä¸€ä¸ªå­—æ¯â€œbâ€å¤§äºâ€œaâ€ï¼ˆå³ä½¿åè€…æ›´é•¿ï¼‰
julia> "b" > "a whatever"
true

# å› ä¸ºç¬¬å…­ä¸ªå­—æ¯â€œsâ€å¤§äºâ€œaâ€ï¼ˆå³ä½¿åè€…æ›´é•¿ï¼‰
julia> "i am short" > "i am a bit long"
true

# å…ˆå¡«å†™åæ¯”è¾ƒ
julia> "9527 + 1314 = 10841" == "9527 + 1314 = $(9527 + 1314)"
true
```

å¯ä»¥ç”¨`findfirst`ä»å·¦åˆ°å³åœ°æŸ¥æ‰¾æŸä¸ª**å­—ç¬¦**ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼š
![](../æ’å›¾/Manual-Strings-Nothing-Returned-By-Findfirst.png "Nothing Returned By findfirst")

éœ€è¦æ³¨æ„çš„æ˜¯ï¼š
```
# Nothing
julia> findfirst(isequal("c"), "abcabcabc")
```

å¯ä»¥ç”¨`findnext`å¸¦æœ‰åç½®åœ°ã€ä»å·¦åˆ°å³åœ°æŸ¥æ‰¾æŸä¸ª**å­—ç¬¦**ä¸‹ä¸€æ¬¡å‡ºç°åœ°ç´¢å¼•ï¼š
```
julia> findnext(isequal('o'), "xylophone", 5)
7

julia> findnext(isequal('o'), "xylophone", 1)
4

# ä»åç½®å¼€å§‹æŸ¥æ‰¾
julia> findnext(isequal('o'), "xylophone", 7)
7

# Nothing
julia> findnext(isequal('o'), "xylophone", 8)
```

*Juliaæœ‰ä¸ªNothingç±»å‹ã€‚*

å¯ä»¥ç”¨`occursin`ï¼ˆå³occurs inè¿å†™ï¼‰æ£€æŸ¥æŸ**å­—ç¬¦ï¼ˆä¸²ï¼‰**åŒ…å«æŸå­ä¸²ï¼š
```
julia> occursin("world", "hello, world!")
true

# è¿™é‡Œæ˜¯åŒå¼•å·
julia> occursin("a", "act as if")
true

julia> occursin("A", "act as if")
false

# è¿™é‡Œæ˜¯å•å¼•å·
julia> occursin('a', "act as if")
true
```

**ä¸Šè¿°ä¾‹ç¨‹è¯´æ˜`occursin`ä¹Ÿèƒ½æŸ¥æ‰¾å­—ç¬¦å­—é¢ã€‚**

å¦å¤–ä¸¤ä¸ªé¡ºæ‰‹åœ°å­—ç¬¦ä¸²å‡½æ•°ï¼š`repeat`ã€`join`ã€‚
```
julia> repeat(".:Z:.", 9)
".:Z:..:Z:..:Z:..:Z:..:Z:..:Z:..:Z:..:Z:..:Z:."

julia> join(["apple", "banana", "cherry"], " ## ", " @@ ")
"apple ## banana @@ cherry"
```

è¿™é‡Œç»™ä¸ªå¸¸ç”¨å­—ç¬¦ä¸²å‡½æ•°æ¸…å•â€”â€”

|å‡½æ•°|è¯´æ˜|
|:---:|:---:|
|`firstindex(text)`|é¦–ä¸ªå­—èŠ‚ç´¢å¼•ï¼Œé€šå¸¸æ˜¯ä¸€ï¼ˆåˆ«çš„å®¹å™¨ä¸æ˜¯å¿…é¡»çš„ï¼‰ã€‚|
|`lastinfex(text)`|æœ€æœ«å­—èŠ‚ç´¢å¼•ã€‚|
|`length(text)`|å­—ç¬¦ä¸²ä¸­å­—ç¬¦ä¸ªæ•°ã€‚|
|`length(text, i, j)`|å­—èŠ‚ç´¢å¼•`i`å’Œ`j`ä¹‹é—´çš„æœ‰æ•ˆå­—ç¬¦ä¸ªæ•°ã€‚|
|`ncodeunits(text)`|å­—ç¬¦ä¸²ä¸­ç¼–ç ç‚¹ä¸ªæ•°ã€‚|
|`codeunit(text, i)`|å­—ç¬¦ä¸²ç´¢å¼•`i`å¤„ç¼–ç ç‚¹æ•°å€¼ã€‚|
|`thisind(text, i)`|ä»»æ„ç´¢å¼•`i`å¤„çš„å­—ç¬¦çš„é¦–ä¸ªå­—èŠ‚ç´¢å¼•ã€‚|
|`nextind(text, i, n=1)`|å­—èŠ‚ç´¢å¼•`i`ä¹‹åç¬¬`n`ï¼ˆé»˜è®¤ä¸€ï¼‰ä¸ªå­—ç¬¦çš„å­—èŠ‚ç´¢å¼•ï¼ˆå­—ç¬¦èµ·å§‹ï¼‰ã€‚|
|`prevind(text, i, n=1)`|å­—èŠ‚ç´¢å¼•`i`ä¹‹å‰ç¬¬`n`ï¼ˆé»˜è®¤ä¸€ï¼‰ä¸ªå­—ç¬¦çš„å­—èŠ‚ç´¢å¼•ï¼ˆå­—ç¬¦èµ·å§‹ï¼‰ã€‚|

å•ç»ƒ`thisind(text, i)`å‡½æ•°ï¼

![](../bug/Manual-Strings-Thisind.png "thisind")

æ²¡é”™ï¼è¿™é‡Œåˆå¾—æUnicodeå­—ç¬¦ï¼Œä»¥UTF-8ä¸ºä¾‹ï¼š
```
julia> thisind("âˆ€Î±>Î²:Î±+1>Î²", 3)
1

julia> thisind("âˆ€Î±>Î²:Î±+1>Î²", 6)
6

julia> thisind("âˆ€Î±>Î²:Î±+1>Î²", 5)
4

julia> 'Î±'
'Î±': Unicode U+03b1 (category Ll: Letter, lowercase)
```
å°±æ˜¯è¯´ä»»æ„ç´¢å¼•`i`ä¸ä¸€å®šå°±â€œè¸©ä¸­â€æœ‰æ•ˆå­—ç¬¦ï¼ˆèµ·å§‹ç´¢å¼•ï¼‰ï¼Œè€Œ`thisind(text, i)`å‡½æ•°çš„ä½œç”¨å°±æ˜¯ä¸ºè§£å†³è¿™ä¸ªçš„ï¼Œâ€œè¸©åœ¨ğŸçš„ä»»æ„éƒ¨ä½æ€»æ˜¯è¿”å›è›‡å¤´â€ã€‚

# éæ ‡å‡†å­—ç¬¦ä¸²å­—é¢

æœ‰äº›æƒ…å†µï¼Œç¾¤ä¼—å‘æ„å»ºæˆ–é‡‡ç”¨å­—ç¬¦ä¸²è¯­ä¹‰ï¼Œä½†ä¸æƒ³æŒ‰æ ‡å‡†å­—ç¬¦ä¸²æ„å»ºæ–¹å¼æ¥åšã€‚
çŒªåæä¾›â€œéæ ‡å‡†å­—ç¬¦ä¸²å­—é¢â€ï¼Œçœ‹èµ·æ¥æ˜¯åŒå¼•å·åŒ…è£¹èµ·æ¥çš„ï¼Œä½†ç´§å¯†å‰ç¼€ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œä¹Ÿä¸æŒ‰å¸¸è§„å­—ç¬¦ä¸²å­—é¢åŠäº‹ã€‚

æ­£åˆ™è¡¨è¾¾å¼ã€å­—èŠ‚æ•°ç»„å­—é¢ã€ç‰ˆæœ¬å·ç ã€å¦‚ä¸‹æ‰€è¿°ï¼Œéƒ½æ˜¯æŸäº›éæ ‡å‡†å­—ç¬¦å­—é¢çš„ä¾‹å­ï¼Œåœ¨ã€[å…ƒç¼–ç¨‹](./å…ƒç¼–ç¨‹.md "Metaprogramming")ã€‘ä¸­ä¹Ÿæœ‰äº›ä¾‹ç¨‹ã€‚

## æ­£åˆ™è¡¨è¾¾å¼

Juliaå…¼å®¹Perlçš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ­£å¦‚[PCRE](http://www.pcre.org/)åº“ç»™å‡ºçš„ã€‚
æ­£åˆ™è¡¨è¾¾å¼å’Œå­—ç¬¦ä¸²ä»¥ä¸¤ç§æ–¹å¼ç›¸å…³ï¼šç›´æ¥è¿æ¥ã€é—´æ¥è¿æ¥ã€‚

- ç›´æ¥è¿æ¥ï¼šå­—ç¬¦ä¸²æœ¬èº«å°±æ˜¯æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ï¼›
- é—´æ¥è¿æ¥ï¼šæŠŠæ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²è§£æä¸ºçŠ¶æ€æœºä»¥é«˜æ•ˆæŸ¥æ‰¾ç¬¦åˆæ¨¡å¼çš„å­—ç¬¦ä¸²ã€‚

Juliaä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²æ˜¯ä»¥"r"åšå‰ç¼€çš„ï¼›æœ€åŸºç¡€çš„æ­£åˆ™è¡¨è¾¾å¼æ²¡æœ‰ä»»ä½•é€‰é¡¹ï¼Œå°±æ˜¯ç”¨â€œrâ€åšå‰å¯¼çš„å­—ç¬¦ä¸²ã€‚
```
julia> r"^\s*(?:#|$)"
r"^\s*(?:#|$)"

julia> typeof(ans)
Regex
```

ç”¨`occursin`æ¥æ£€æŸ¥æ˜¯å¦åŒ¹é…ï¼š
```
julia> pattern = r"^\s*(?:#|$)"
r"^\s*(?:#|$)"

julia> occursin(pattern, "not a comment")
false

julia> occursin(pattern, "# a comment")
true
```

æ­£å¦‚éªšå¹´æ‰€è§`occursin`åªæ˜¯ç®€å•è¿”å›`false`æˆ–`true`æ ‡è¯†å­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…æ­£åˆ™æ¨¡å¼ã€‚
ä¸€èˆ¬åœ°ï¼Œå„ä½é€šçŸ¥ä¸ä½†æƒ³ç›´åˆ°æ˜¯å¦åŒ¹é…ï¼Œè¿˜æƒ³çŸ¥é“æ€ä¹ˆåŒ¹é…ã€‚
é‚£å°±å¾—ç”¨`match`å‡½æ•°å•¦ï¼
```
# ä¹¦æ¥å‰æ–‡
julia> match(pattern, "not a comment")

julia> match(pattern, "# a comment")
RegexMatch("#")
```

è‹¥ä¸åŒ¹é…ï¼Œåˆ™è¿”å›`nothing`â€”â€”ä¸€ä¸ªç‰¹æ®Šå€¼ï¼Œä¸åœ¨äº¤äº’å¼æç¤ºç¬¦ä¸‹æ‰“å°ä»»ä½•ç—•è¿¹ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå¯åœ¨ç¼–ç¨‹ä¸­å½“ä½œæ™®é€šå­—é¢ç”¨ï¼ˆ[è„šæœ¬](https://github.com/JulialangOrgCN/howtojulia/blob/master/manual/strings.jl)ï¼‰ã€‚
```
pattern = r"^\s*(?:#|$)"

matched = match(pattern, "# a comment")

if matched == nothing
    println("not a comment")
else
    println("blank or a comment")
end
```

å¦‚æœåŒ¹é…ï¼Œåˆ™è¿”å›`RegexMatch`å¯¹è±¡ï¼Œè®°å½•äº†å¦‚ä½•åŒ¹é…çš„ï¼ŒåŒ…æ‹¬æ•æ‰åˆ°çš„åŒ¹é…æ­£åˆ™æ¨¡å¼çš„å­ä¸²ï¼ˆæœ‰çš„è¯ï¼‰ã€‚
ä¸Šä¾‹åªæ˜¯æ•æ‰åŒ¹é…çš„éƒ¨åˆ†å­ä¸²ï¼Œä½†ç¾¤ä¼—æƒ³æŠŠæ³¨é‡Šç¬¦å·ï¼ˆ#ï¼‰ä¹‹åæ‰€æœ‰éç©ºæ–‡æœ¬éƒ½æ•æ‰åˆ°ã€‚
é‚£å°±å¾—æ”¹å†™æ­£åˆ™æ¨¡å¼å­—ç¬¦ä¸²å•¦ï¼
```
# æ•æ‰çš„æ˜¯â€œ(.*?)â€æ¨¡å¼æŒ‡å®šçš„éƒ¨åˆ†
# è¦ä¹ˆç©º
# è¦ä¹ˆä»¥â€œ#â€ä¸ºéç©ºå‰å¯¼ä¸”ä¸¤ç«¯çš„ç©ºç™½ä¸è¦ï¼ˆä¸­é—´å•è¯åˆ†éš”çš„ç©ºç™½ä¿ç•™ï¼‰
# è¿™ä¸æ­£æ˜¯Juliaä¸­ç±»Shellçš„æ³¨é‡Šé£æ ¼å®šä¹‰ä¹ˆ
julia> matched = match(r"^\s*(?:#\s*(.*?)\s*$|$)", "# a comment \t\r\n")
RegexMatch("# a comment \t\r\n", 1="a comment")
```

è¿™ä¸ª`match`è¿˜æœ‰æŒ‡å®šä»å“ªä¸ªç´¢å¼•å¼€å§‹åŒ¹é…çš„é€‰é¡¹ã€‚
```
# ä¸ç»™è¿™ä¸ªé€‰é¡¹é»˜è®¤å°±æ˜¯ä¸€ï¼ˆä»å¤´å¼€å§‹åŒ¹é…ï¼‰
julia> matched = match(r"\d+", "Hi9527we'LL1314aha~")
RegexMatch("9527")

julia> matched = match(r"\d+", "Hi9527we'LL1314aha~", 1)
RegexMatch("9527")

julia> matched = match(r"\d+", "Hi9527we'LL1314aha~", 2)
RegexMatch("9527")

julia> matched = match(r"\d+", "Hi9527we'LL1314aha~", 3)
RegexMatch("9527")

julia> matched = match(r"\d+", "Hi9527we'LL1314aha~", 4)
RegexMatch("527")

julia> matched = match(r"\d+", "Hi9527we'LL1314aha~", 5)
RegexMatch("27")

julia> matched = match(r"\d+", "Hi9527we'LL1314aha~", 6)
RegexMatch("7")

julia> matched = match(r"\d+", "Hi9527we'LL1314aha~", 7)
RegexMatch("1314")
```

å¯ä»¥ä»`RegexMatch`å¯¹è±¡ä¸­æŠ½å–ï¼š

- åŒ¹é…åˆ°çš„æ•´ä½“å­ä¸²ï¼š`matched.match`
- æ•æ‰åˆ°çš„å­ä¸²ï¼ˆå­—èŠ‚æ•°ç»„ï¼‰ï¼š`matched.captures`
- åŒ¹é…åˆ°çš„å­ä¸²åœ¨æ•´ä¸ªå­—ç¬¦ä¸²çš„åç§»ï¼š`matched.offset`
- åŒ¹é…åˆ°çš„æ‰€æœ‰å­ä¸²åç§»å‘é‡ï¼š`matched.offsets`

å¦‚æœæ²¡æœ‰åŒ¹é…åˆ°ï¼Œ`matched.captures`å¯¹åº”ä½ç½®å°±æ˜¯`nothing`ï¼Œ`matched.offsets`åŒ…æ‹¬é›¶åç§»ï¼ˆå›æƒ³Juliaæ˜¯åŸºäº`1`çš„ç´¢å¼•â€”â€”é›¶åç§»åœ¨å­—ç¬¦ä¸²ä¸­æ— æ•ˆï¼‰ã€‚
ä¸‹é¢æ˜¯äº›æœ‰å‡ åˆ†åˆ»æ„äººé€ çš„ä¾‹ç¨‹ï¼š
```
julia> matched = match(r"(9527|huaan|åå®‰)(wants|dreams)?(1314|forever|ç›¸çˆ±ç›¸å®ˆ)", "åå®‰dreams1314")
RegexMatch("åå®‰dreams1314", 1="åå®‰", 2="dreams", 3="1314")

julia> matched.match
"åå®‰dreams1314"

julia> matched.captures
3-element Array{Union{Nothing, SubString{String}},1}:
 "åå®‰"
 "dreams"
 "1314"

julia> matched.offset
1

julia> matched.offsets
3-element Array{Int64,1}:
  1
  7
 13
```

*Juliaç›´æ¥æ”¯æŒUnicodeï¼ŒPythonçš„ä½ç‰ˆæœ¬ä¸­éœ€è¦â€œuâ€åšå‰å¯¼æ¥å£°æ˜ï¼›åŒ…æ‹¬åœ¨æ­£åˆ™ä¸­ã€‚*

åŒ¹é…ç»“æœè¿”å›æ•°ç»„å¾ˆæ–¹ä¾¿ç”¨è§£æ„è¯­æ³•ç»‘å®šåˆ°æœ¬åœ°å˜é‡ã€‚
```
# ä¹¦æ¥å‰æ–‡
julia> name, action, state = matched.captures
3-element Array{Union{Nothing, SubString{String}},1}:
 "åå®‰"
 "dreams"
 "1314"

julia> name
"åå®‰"

julia> action
"dreams"

julia> state
"1314"
```

åŒ¹é…ç»“æœè¿˜æ”¯æŒç´¢å¼•ã€æ•æ‰åˆ°çš„å‘½ååˆ†ç»„çš„åç§°è®¿é—®ï¼š
```
julia> matched = match(r"(?<hour>\d+):(?<minute>\d+):(?<second>\d+)", "12:30:45")
RegexMatch("12:30:45", hour="12", minute="30", second="45")

julia> matched[:minute]
"30"

julia> matched[2]
"30"
```

å½“ç„¶è¿˜å¯ä»¥æ­£åˆ™æ›¿æ¢ï¼Œå…ˆé€šè¿‡ä¾‹ç¨‹ç†è§£ï¼š
```
julia> matched = match(r"(\d+) (?<forever>\d+)", "9527 1314")
RegexMatch("9527 1314", 1="9527", forever="1314")

# åŒ¹é…ç»“æœæ˜¯ä¸¤ç»„
# å‘½åforeveræŒ‡ä»£ç¬¬äºŒç»„åŒ¹é…ç»“æœ
julia> matched.captures
2-element Array{Union{Nothing, SubString{String}},1}:
 "9527"
 "1314"

# å°†ç¬¬äºŒç»„ï¼ˆ\2ï¼‰åŒ¹é…ç»“æœæ‹¼åœ¨ç¬¬äºŒç»„ï¼ˆforeverï¼‰åŒ¹é…ç»“æœä¹‹å
julia> replace("9527 1314", r"(\d+) (?<forever>>\d+)" => s"\g<forever> \2")
"1314 1314"

# å°†ç¬¬ä¸€ç»„ï¼ˆ\1ï¼‰åŒ¹é…ç»“æœæ‹¼åœ¨ç¬¬äºŒç»„ï¼ˆforeverï¼‰åŒ¹é…ç»“æœä¹‹å
julia> replace("9527 1314", r"(\d+) (?<forever>\d+)" => s"\g<forever> \1")
"1314 9527"

# å°†ç¬¬é›¶ç»„ï¼ˆ\0ï¼‰åŒ¹é…ç»“æœæ‹¼åœ¨ç¬¬äºŒç»„ï¼ˆforeverï¼‰é™ªé™ªç»“æœä¹‹å
# ç¬¬é›¶ç»„å³æ•´ä¸ªåŒ¹é…ç»“æœ
julia> replace("9527 1314", r"(\d+) (?<forever>\d+)" => s"\g<forever> \0")
"1314 9527 1314"
```

éªšå¹´èƒ½å¦æ˜ç™½ï¼Ÿ

- `s`ï¼ˆsubstitutionï¼‰å‰å¯¼çš„æ›¿æ¢æ¨¡å¼å­—ç¬¦ä¸²ï¼›
- `\g`ï¼ˆ`\g<group>`ï¼‰è¡¨ç¤ºåŒ¹é…ç»“æœå‘½ååˆ†ç»„ï¼›
- `\n`ï¼ˆä¸æ˜¯æ¢è¡Œï¼‰ä»£è¡¨ç¬¬nï¼ˆè‡ªç„¶æ•°ï¼‰ç»„åŒ¹é…ç»“æœã€‚
- `\g<natural-number>`ä¹Ÿå¯è¡¨ç¤ºç¬¬nç»„åŒ¹é…ç»“æœã€‚

```
julia> replace("9527 1314", r"(\d+) (?<forever>\d+)" => s"\g<forever> \g<0> joke")
"1314 9527 1314 joke"
```

ç¾¤ä¼—å¯ä»¥æ”¹å˜æ­£åˆ™è¡¨è¾¾å¼çš„è¡Œä¸ºï¼Œç»“åˆ`i`ã€`m`ã€`s`ã€`x`ç­‰ã€‚
è¿™äº›ç¬¦å·æœ‰ç‰¹å®šå«ä¹‰ï¼Œä¸‹è¡¨æ‘˜è‡ªPerlçš„[æ­£åˆ™è¡¨è¾¾å¼æ‰‹å†Œ](http://perldoc.perl.org/perlre.html#Modifiers)ã€‚

|ç¬¦å·|ç®€è¿°|å«ä¹‰|
|:---:|:---:|:---:|
|`i`|å¿½ç•¥å¤§å°å†™||
|`m`|å¤„ç†å¤šè¡Œ|ä»¤â€œ^â€å’Œâ€œ$â€åŒ¹é…æ•´ä¸ªå­—ç¬¦ä¸²çš„å¼€å¤´å’Œç»“å°¾ï¼Œçªç ´è¡Œå¤´è¡Œå°¾çš„é™åˆ¶ã€‚|
|`s`|å¤„ç†å•è¡Œ|ä»¤â€œ.â€ä¹ŸåŒ¹é…æ¢è¡Œã€‚|
|`x`|å¿½ç•¥æ­£åˆ™æ¨¡å¼å­—ç¬¦ä¸²çš„ç©ºç™½|æœ‰åˆ©äºæŠŠæ­£åˆ™è¡¨è¾¾å¼å†™å¾—æ›´å¯è¯»ï¼Œâ€œ#â€è¿˜æ˜¯åƒæºä»£ç ä¸€æ ·è¡¨ç¤ºæ³¨é‡Šã€‚|

ä¸¾äº›ä¾‹å­è¯´æ˜ï¼š

```
julia> matched = match(r".+"ism, """
       hi, i am bob,
       nicknamed xiucai,
       personal website is "http://nagexiucai.com/".
       i am so glad to make friends with julia.
       """)
RegexMatch("hi, i am bob,\nnicknamed xiucai,\npersonal website is \"http://nagexiucai.com/\".\ni am so glad to make friends with julia.\n")

julia> println(matched.match)
hi, i am bob,
nicknamed xiucai,
personal website is "http://nagexiucai.com/".
i am so glad to make friends with julia.

# ä¸ºæ˜¾è‘—èµ·è§ç”¨â€œ\x20â€è¡¨ç¤ºè½¬ä¹‰ç©ºæ ¼
julia> matched = match(r"
       (\d+)
       \x20
       (?<forever>\d+)
       "ismx, "9527 1314")
RegexMatch("9527 1314", 1="9527", forever="1314")
```

ä»â€œ\x20â€ï¼ˆâ€œ\ â€ï¼‰å¯ä»¥çœ‹å‡ºï¼Œæ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²ï¼ˆå¸¦â€œrâ€å‰å¯¼ï¼‰ä¸­é™¤äº†åŒå¼•å·ï¼ˆ"ï¼‰ï¼Œä¸ä½œä»»ä½•ã€å¡«å†™ã€‘æˆ–è½¬ä¹‰ã€‚
```
julia> n = 9527
9527

julia> r"$n"
r"$n"

julia> "$n"
"9527"

julia> r"\?"
r"\?"

julia> "\?"
ERROR: syntax: invalid escape sequence
```

æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²ä¹Ÿæ”¯æŒã€ä¸‰ä¸ªåŒå¼•å·ã€‘ï¼Œä¾¿äºä¹¦å†™åŒ…å«åŒå¼•å·çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚

## å­—èŠ‚æ•°ç»„å­—é¢

å½¢å¼ï¼š`b"..."`ã€‚

å¯ç”¨å­—ç¬¦ä¸²æ³¨è§£è¡¨è¾¾åˆ¶åº¦å­—èŠ‚æ•°ç»„ï¼Œå°±æ˜¯UInt8çš„æ•°ç»„ã€‚

è¿™ç±»ç©æ„å„¿çš„ç±»å‹æ˜¯`CodeUnits(UInt8, String)`ï¼Œéµå¾ªä»¥ä¸‹è§„åˆ™ï¼š

- ASCIIå­—ç¬¦ï¼ˆå«è½¬ä¹‰çš„ï¼‰å ä¸€ä¸ªå­—èŠ‚ï¼›
- `\x<hexadecimal>`å’Œ`\<octal>`å ç”¨å¯¹åº”çš„è½¬ä¹‰å­—ç¬¦æ‰€å å­—èŠ‚ï¼›
- Unicodeè½¬ä¹‰åºåˆ—ï¼ˆ`\u`æˆ–`\U`ï¼‰å ç”¨UTF-8ç¼–ç ç‚¹çš„å­—èŠ‚ã€‚

è¿™ä¸‰æ¡å…¶å®æœ‰é‡å ï¼Œå°äº0x80ï¼ˆ128ï¼‰çš„è½¬ä¹‰å­—ç¬¦å‰ä¸¤æ¡éƒ½è¡¨è¿°äº†ã€‚

ç•¥è¿‡å•°å—¦ï¼Œç›´å¥”æ —å­ã€‚
```
julia> b"DATA\xff\u2200"
8-element Base.CodeUnits{UInt8,String}:
 0x44
 0x41
 0x54
 0x41
 0xff
 0xe2
 0x88
 0x80
```

ASCIIå­—ç¬¦ä¸²â€œDATAâ€å¯¹åº”â€œ0x44 0x41 0x54 0x41â€ï¼›
â€œ0xffâ€å ç”¨ä¸€ä¸ªå­—èŠ‚ï¼ˆ255ï¼‰ï¼›
â€œ\u2200â€å ç”¨ä¸‰ä¸ªå­—èŠ‚â€œ0xe2 0x88 0x80â€ã€‚

**æ³¨æ„ï¼šå­—èŠ‚æ•°ç»„ï¼ˆæ ·å¼çš„å­—ç¬¦ä¸²ï¼‰å¹¶ä¸å¯¹åº”æœ‰æ•ˆçš„UTF-8å­—ç¬¦ä¸²ã€‚**
```
# ä¹¦æ¥å‰æ–‡
julia> isvalid(ans)
ERROR: MethodError: no method matching isvalid(::Base.CodeUnits{UInt8,String})
Closest candidates are:
  isvalid(::String, ::Int64) at strings/string.jl:301
  isvalid(::String) at strings/string.jl:169
  isvalid(::SubString, ::Integer) at strings/substring.jl:80
  ...
Stacktrace:
 [1] top-level scope at none:0

# å»æ‰å­—èŠ‚æ•°ç»„å‰å¯¼ï¼ˆbï¼‰
julia> isvalid("DATA\xff\u2200")
false
```

å­—èŠ‚æ•°ç»„ç»“æœï¼ˆ`CodeUnits{UInt8, String}`ï¼‰æ˜¯åªè¯»çš„ï¼Œå¯ä»¥é€šè¿‡`Vector{UInt8}`æ¥è½¬æ¢ä¸ºå¯è¯»å‘é‡ã€‚
```
julia> sb = b"hi"
2-element Base.CodeUnits{UInt8,String}:
 0x68
 0x69

julia> Vector{UInt8}(sb)
2-element Array{UInt8,1}:
 0x68
 0x69
```

**å…¶å®ç›®å‰æ‰€äº†è§£åˆ°çš„ç¼–ç¨‹è¯­è¨€ï¼Œå­—ç¬¦ä¸²ç±»å‹éƒ½æ˜¯åªè¯»çš„ã€‚**

å†çœ‹ä¸ªASCIIå­—èŠ‚å’ŒUTF-8ç¼–ç ç‚¹çš„å¯¹æ¯”ï¼š
```
julia> b"\xff"
1-element Base.CodeUnits{UInt8,String}:
 0xff

julia> b"\uff"
2-element Base.CodeUnits{UInt8,String}:
 0xc3
 0xbf
```

æ™®é€šASCIIå­—ç¬¦å­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯0x80ä»¥ä¸‹çš„ï¼ŒUTF-8æ— å·®åˆ«ï¼›
ä»‹äº0x80å’Œ0xffä¹‹é—´çš„å­—èŠ‚ï¼Œæ­¤æ—¶Charå·²ä¸æ”¯æŒï¼Œå³æ ‡å‡†ASCIIä¸­æ²¡æœ‰å¯¹åº”çš„å­—ç¬¦ï¼Œä½†ç¡®å®æ˜¯ä¸€ä¸ªå­—èŠ‚ï¼šâ€œ\x80â€ï¼ˆåå…­è¿›åˆ¶è½¬ä¹‰å­—èŠ‚ï¼‰å’Œâ€œ\u80â€ï¼ˆUTF-8ï¼‰çš„åŒºåˆ«åœ¨äºå‰è€…é™¤éç´§éšç‰¹æ®Šå­—èŠ‚ï¼ˆæ„æˆæœ‰æ•ˆç¼–ç ç‚¹ï¼‰ï¼Œå¦åˆ™åªæ˜¯ä¸ªè½¬ä¹‰UInt8å€¼ï¼Œåè€…åˆ™æ˜¯ä¸¤ä¸ªå­—èŠ‚çš„ç¼–ç ç‚¹ã€‚

å¦‚æœè¿˜æ˜¯çŠ¯æ™•ï¼Œè¯·çœ‹ã€[ç å†œå¿…é¡»çŸ¥é“çš„Unicodeå’Œå­—ç¬¦é›†](https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/)ã€‘ç¼“è§£å¤´ç–¼ã€‚

## ç‰ˆæœ¬å·ç å­—é¢

å½¢å¼ï¼š`v"..."`ã€‚

ç”¨æ¥æ„å»º`VersionNumber`å¯¹è±¡ï¼ˆè§ã€[ç²¾è¦](../åŸºç¡€/ç²¾è¦.md "Base: Essentials-VersionNumber")ã€‘ï¼‰,éµå®ˆ[ç‰ˆæœ¬å·ç è¯­ä¹‰](http://semver.org/)ï¼ŒåŒ…æ‹¬ä¸»ç‰ˆæœ¬å·ã€å‰¯ç‰ˆæœ¬å·ã€è¡¥ä¸åºå·ï¼Œç´§è·Ÿå¤‡é€‰å‘å¸ƒï¼ˆpre-releaseï¼‰å’Œæµ‹è¯•æ„å»ºæ³¨è§£ã€‚

ä¾‹å¦‚`v"1.0.1-alpha-linux-i686"`ç†è§£ä¸ºï¼š

- ä¸»ç‰ˆæœ¬å·ï¼š1
- å‰¯ç‰ˆæœ¬å·ï¼š0
- è¡¥ä¸åºå·ï¼š0
- å¤‡é€‰å‘å¸ƒï¼šalpha
- æ„å»ºæ³¨é‡Šï¼šlinux-i686

*å¤§è‡´å¦‚æ­¤ã€‚*

ç‰ˆæœ¬å·ç åœ¨ç®€åŒ–å’Œæ­£ç¡®æ¯”è¾ƒä¸åŒç‰ˆæœ¬å¾ˆæœ‰ç”¨ã€‚
ä¾‹å¦‚å¸¸é‡`VERSION`æŒæœ‰Juliaçš„ç‰ˆæœ¬å·ç å¯¹è±¡ï¼Œå¯ä»¥å®šä¹‰ä¸€äº›å’Œç‰ˆæœ¬ç›¸å…³çš„è¡Œä¸ºå£°æ˜ï¼š
```
julia> if v"0.6" <= VERSION < v"0.7-"
         println("ä¸å…¼å®¹")
       elseif v"0.7+" <= VERSION <= v"1.0.0"
         println("éƒ¨åˆ†å…¼å®¹")
       else
         println("å…¼å®¹")
       end
éƒ¨åˆ†å…¼å®¹
```
ä¸Šè¿°ä¾‹å­ä¸­é‡‡ç”¨äº†éæ ‡å‡†çš„ç‰ˆæœ¬å·ç `0.7-`å’Œ`0.7+`æ˜¯Juliaæ‰©å±•æ ‡å‡†çš„ç‰ˆæœ¬å·ç æ³¨è§£ï¼Œè¡¨ç¤ºå°äº`0.7`å’Œå¤§äº`0.7`çš„ç‰ˆæœ¬ã€‚

ä»£ç è§£è¯»ï¼š

    å¦‚æœå½“å‰ç‰ˆæœ¬æ˜¯0.6ï¼ˆå«ï¼‰ä»¥ä¸Šä¸”0.7ï¼ˆä¸å«ï¼‰ä»¥ä¸‹çš„ç¨³å®šç‰ˆæœ¬ï¼Œè²Œä¼¼åªæ˜¯0.6å•°ï¼Œåˆ™ä¸å…¼å®¹ï¼
    å¦‚æœå½“å‰ç‰ˆæœ¬æ˜¯0.7ï¼ˆå«ï¼‰ä»¥ä¸Šä¸”1.0.0ï¼ˆå«ï¼‰ä»¥ä¸‹çš„ç‰ˆæœ¬ï¼Œå®é™…åªæœ‰0.7å’Œ1.0.0ä¸¤ä¸ªç‰ˆæœ¬ï¼Œåˆ™éƒ¨åˆ†å…¼å®¹ï¼
    å¦åˆ™éƒ½å…¼å®¹ã€‚

*å½“ç„¶ä¸Šè¾¹ä»£ç å¹¶æ— ç¡®åˆ‡å«ä¹‰ï¼Œåªæ˜¯è¯´ç±³å›½`VERSION`çš„ä¸€ä¸ªç”¨é€”ã€‚*
è¿™ä¸ªä¸œè¥¿åœ¨*Pkg*æ¨¡å—ä¸­å¹¿æ³›åº”ç”¨ã€‚

**è¿™é‡Œæ²¡æœ‰å°†è‹±æ–‡å•°å—¦é€å¥å¯¹ç…§ç¿»è¯‘ï¼Œåªæ˜¯è¯´æ˜å¤§æ„ï¼Œå…¶å®æ˜¯å®Œæ•´æ„æ€ã€‚**

## åŸå­—ç¬¦ä¸²å­—é¢

åŸå­—ç¬¦ä¸²å­—é¢ï¼Œä¸ã€å¡«å†™ã€‘ä¹Ÿä¸è½¬ä¹‰ï¼Œå½¢å¼æ˜¯æ™®é€šå­—ç¬¦ä¸²å¸¦`raw`å‰ç¼€ã€‚
å¯¹äºè¡¨è¾¾åŒ…æ‹¬ä»£ç æˆ–è€…æœ‰`$`æˆ–`\`ç‰¹æ®Šå­—ç¬¦çš„åŸæ„å¾ˆæœ‰ç”¨ã€‚

ä¾‹å¤–æ˜¯å¼•å·è¿˜å¿…é¡»è½¬ä¹‰ï¼Œå½“åæ–œæ ï¼ˆ`\`ï¼‰å‡ºç°åœ¨å¼•å·ä¹‹å‰æ—¶ä¹Ÿå¿…é¡»è½¬ä¹‰ã€‚
```
julia> println(raw"\\ \\\"")
\\ \"
```
æ³¨æ„å‰ä¸¤ä¸ªåæ–œæ é€å­—å‡ºç°ï¼Œå› ä¸ºæ²¡æœ‰ç´§è·Ÿå¼•å·ï¼Œç„¶è€Œæœ€åä¸€ä¸ªåæ–œæ ç”±äºç´§è·Ÿå¼•å·ï¼Œéœ€è¦è½¬ä¹‰ï¼›æœ«å°¾çš„å¼•å·è‡ªç„¶ä¹Ÿéœ€è¦è½¬ä¹‰ã€‚

---
# è¯‘åæ„Ÿ

- ä¸€ä¸Šæ¥æŠŠUnicodeè€ƒè™‘çš„æŒºå…¨é¢ã€‚
